<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="canonical" href="https://nominatim.org/admin/Installation/">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Basic Installation - Nominatim 4.1.0</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  <link href="../../assets/_mkdocstrings.css" rel="stylesheet" />
  <link href="../../extra.css" rel="stylesheet" />
  <link href="../../styles.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Basic Installation";
    var mkdocs_page_input_path = "admin/Installation.md";
    var mkdocs_page_url = "/admin/Installation/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Nominatim 4.1.0</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Introduction</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">API Reference</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/Overview/">Overview</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/Search/">Search</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/Reverse/">Reverse</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/Lookup/">Address Lookup</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/Details/">Details</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/Status/">Status</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/Output/">Place Output Formats</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/Faq/">FAQ</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Administration Guide</span></p>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Basic Installation</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#software">Software</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#hardware">Hardware</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#tuning-the-postgresql-database">Tuning the PostgreSQL database</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#downloading-and-building-nominatim">Downloading and building Nominatim</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#downloading-the-latest-release">Downloading the latest release</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#downloading-the-latest-development-version">Downloading the latest development version</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#building-nominatim">Building Nominatim</a>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Import/">Import</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Update/">Update</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Deployment/">Deploy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Setup-Nominatim-UI/">Nominatim UI</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Advanced-Installations/">Advanced Installations</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Maintenance/">Maintenance</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Migration/">Migration from older Versions</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Faq/">Troubleshooting</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Customization Guide</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../customize/Overview/">Overview</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../customize/Import-Styles/">Import Styles</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../customize/Settings/">Configuration Settings</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../customize/Country-Settings/">Per-Country Data</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../customize/Ranking/">Place Ranking</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../customize/Tokenizers/">Tokenizers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../customize/Special-Phrases/">Special Phrases</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../customize/Tiger/">External data: US housenumbers from TIGER</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../customize/Postcodes/">External data: Postcodes</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Developers Guide</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../develop/overview/">Architecture Overview</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../develop/Database-Layout/">Database Layout</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../develop/Indexing/">Indexing</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../develop/Tokenizers/">Tokenizers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../develop/ICU-Tokenizer-Modules/">Custom modules for ICU tokenizer</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../develop/Development-Environment/">Setup for Development</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../develop/Testing/">Testing</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../develop/data-sources/">External Data Sources</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Appendix</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../appendix/Install-on-Ubuntu-18/">Installation on Ubuntu 18</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../appendix/Install-on-Ubuntu-20/">Installation on Ubuntu 20</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../appendix/Install-on-Ubuntu-22/">Installation on Ubuntu 22</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Nominatim 4.1.0</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Administration Guide &raquo;</li>
        
      
    
    <li>Basic Installation</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/openstreetmap/Nominatim/edit/master/docs/admin/Installation.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="basic-installation">Basic Installation<a class="headerlink" href="#basic-installation" title="Permanent link"></a></h1>
<p>This page contains generic installation instructions for Nominatim and its
prerequisites. There are also step-by-step instructions available for
the following operating systems:</p>
<ul>
<li><a href="../../appendix/Install-on-Ubuntu-22/">Ubuntu 22.04</a></li>
<li><a href="../../appendix/Install-on-Ubuntu-20/">Ubuntu 20.04</a></li>
<li><a href="../../appendix/Install-on-Ubuntu-18/">Ubuntu 18.04</a></li>
</ul>
<p>These OS-specific instructions can also be found in executable form
in the <code>vagrant/</code> directory.</p>
<p>Users have created instructions for other frameworks. We haven't tested those
and can't offer support.</p>
<ul>
<li><a href="https://github.com/mediagis/nominatim-docker">Docker</a></li>
<li><a href="https://github.com/peter-evans/nominatim-k8s">Docker on Kubernetes</a></li>
<li><a href="https://github.com/robjuz/helm-charts/blob/master/charts/nominatim/README.md">Kubernetes with Helm</a></li>
<li><a href="https://github.com/synthesio/infra-ansible-nominatim">Ansible</a></li>
</ul>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link"></a></h2>
<h3 id="software">Software<a class="headerlink" href="#software" title="Permanent link"></a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For larger installations you <strong>must have</strong> PostgreSQL 11+ and PostGIS 3+
otherwise import and queries will be slow to the point of being unusable.
Query performance has marked improvements with PostgreSQL 13+ and PostGIS 3.2+.</p>
</div>
<p>For compiling:</p>
<ul>
<li><a href="https://cmake.org/">cmake</a></li>
<li><a href="https://libexpat.github.io/">expat</a></li>
<li><a href="https://proj.org/">proj</a></li>
<li><a href="http://www.bzip.org/">bzip2</a></li>
<li><a href="https://www.zlib.net/">zlib</a></li>
<li><a href="http://site.icu-project.org/">ICU</a></li>
<li><a href="https://www.boost.org/">Boost libraries</a>, including system and filesystem</li>
<li>PostgreSQL client libraries</li>
<li>a recent C++ compiler (gcc 5+ or Clang 3.8+)</li>
</ul>
<p>For running Nominatim:</p>
<ul>
<li><a href="https://www.postgresql.org">PostgreSQL</a> (9.6+ will work, 11+ strongly recommended)</li>
<li><a href="https://postgis.net">PostGIS</a> (2.2+ will work, 3.0+ strongly recommended)</li>
<li><a href="https://www.python.org/">Python 3</a> (3.6+)</li>
<li><a href="https://www.psycopg.org">Psycopg2</a> (2.7+)</li>
<li><a href="https://github.com/theskumar/python-dotenv">Python Dotenv</a></li>
<li><a href="https://github.com/giampaolo/psutil">psutil</a></li>
<li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
<li><a href="https://pypi.org/project/PyICU/">PyICU</a></li>
<li><a href="https://pyyaml.org/">PyYaml</a> (5.1+)</li>
<li><a href="https://github.com/pytries/datrie">datrie</a></li>
<li><a href="https://php.net">PHP</a> (7.0 or later)</li>
<li>PHP-pgsql</li>
<li>PHP-intl (bundled with PHP)</li>
<li>PHP-cgi (for running queries from the command line)</li>
</ul>
<p>For running continuous updates:</p>
<ul>
<li><a href="https://osmcode.org/pyosmium/">pyosmium</a></li>
</ul>
<p>For dependencies for running tests and building documentation, see
the <a href="../../develop/Development-Environment/">Development section</a>.</p>
<h3 id="hardware">Hardware<a class="headerlink" href="#hardware" title="Permanent link"></a></h3>
<p>A minimum of 2GB of RAM is required or installation will fail. For a full
planet import 128GB of RAM or more are strongly recommended. Do not report
out of memory problems if you have less than 64GB RAM.</p>
<p>For a full planet install you will need at least 1TB of hard disk space.
Take into account that the OSM database is growing fast.
Fast disks are essential. Using NVME disks is recommended.</p>
<p>Even on a well configured machine the import of a full planet takes
around 2 days. On traditional spinning disks, 7-8 days are more realistic.</p>
<h2 id="tuning-the-postgresql-database">Tuning the PostgreSQL database<a class="headerlink" href="#tuning-the-postgresql-database" title="Permanent link"></a></h2>
<p>You might want to tune your PostgreSQL installation so that the later steps
make best use of your hardware. You should tune the following parameters in
your <code>postgresql.conf</code> file.</p>
<div class="codehilite"><pre><span></span><code><span class="err">shared_buffers = 2GB</span>
<span class="err">maintenance_work_mem = (10GB)</span>
<span class="err">autovacuum_work_mem = 2GB</span>
<span class="err">work_mem = (50MB)</span>
<span class="err">effective_cache_size = (24GB)</span>
<span class="err">synchronous_commit = off</span>
<span class="err">max_wal_size = 1GB</span>
<span class="err">checkpoint_timeout = 10min</span>
<span class="err">checkpoint_completion_target = 0.9</span>
</code></pre></div>

<p>The numbers in brackets behind some parameters seem to work fine for
64GB RAM machine. Adjust to your setup. A higher number for <code>max_wal_size</code>
means that PostgreSQL needs to run checkpoints less often but it does require
the additional space on your disk.</p>
<p>Autovacuum must not be switched off because it ensures that the
tables are frequently analysed. If your machine has very little memory,
you might consider setting:</p>
<div class="codehilite"><pre><span></span><code><span class="err">autovacuum_max_workers = 1</span>
</code></pre></div>

<p>and even reduce <code>autovacuum_work_mem</code> further. This will reduce the amount
of memory that autovacuum takes away from the import process.</p>
<p>For the initial import, you should also set:</p>
<div class="codehilite"><pre><span></span><code><span class="err">fsync = off</span>
<span class="err">full_page_writes = off</span>
</code></pre></div>

<p>Don't forget to re-enable them after the initial import or you risk database
corruption.</p>
<h2 id="downloading-and-building-nominatim">Downloading and building Nominatim<a class="headerlink" href="#downloading-and-building-nominatim" title="Permanent link"></a></h2>
<h3 id="downloading-the-latest-release">Downloading the latest release<a class="headerlink" href="#downloading-the-latest-release" title="Permanent link"></a></h3>
<p>You can download the <a href="https://nominatim.org/downloads/">latest release from nominatim.org</a>.
The release contains all necessary files. Just unpack it.</p>
<h3 id="downloading-the-latest-development-version">Downloading the latest development version<a class="headerlink" href="#downloading-the-latest-development-version" title="Permanent link"></a></h3>
<p>If you want to install latest development version from github, make sure to
also check out the osm2pgsql subproject:</p>
<div class="codehilite"><pre><span></span><code><span class="err">git clone --recursive https://github.com/openstreetmap/Nominatim.git</span>
</code></pre></div>

<p>The development version does not include the country grid. Download it separately:</p>
<div class="codehilite"><pre><span></span><code><span class="err">wget -O Nominatim/data/country_osm_grid.sql.gz https://www.nominatim.org/data/country_grid.sql.gz</span>
</code></pre></div>

<h3 id="building-nominatim">Building Nominatim<a class="headerlink" href="#building-nominatim" title="Permanent link"></a></h3>
<p>The code must be built in a separate directory. Create the directory and
change into it.</p>
<div class="codehilite"><pre><span></span><code><span class="err">mkdir build</span>
<span class="err">cd build</span>
</code></pre></div>

<p>Nominatim uses cmake and make for building. Assuming that you have created the
build at the same level as the Nominatim source directory run:</p>
<div class="codehilite"><pre><span></span><code><span class="err">cmake ../Nominatim</span>
<span class="err">make</span>
<span class="err">sudo make install</span>
</code></pre></div>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The default installation no longer compiles the PostgreSQL module that
is needed for the legacy tokenizer from older Nominatim versions. If you
are upgrading an older database or want to run the
<a href="../../customize/Tokenizers/#legacy-tokenizer">legacy tokenizer</a> for
some other reason, you need to enable the PostgreSQL module via
cmake: <code>cmake -DBUILD_MODULE=on ../Nominatim</code>. To compile the module
you need to have the server development headers for PostgreSQL installed.
On Ubuntu/Debian run: <code>sudo apt install postgresql-server-dev-&lt;postgresql version&gt;</code></p>
</div>
<p>Nominatim installs itself into <code>/usr/local</code> per default. To choose a different
installation directory add <code>-DCMAKE_INSTALL_PREFIX=&lt;install root&gt;</code> to the
cmake command. Make sure that the <code>bin</code> directory is available in your path
in that case, e.g.</p>
<div class="codehilite"><pre><span></span><code><span class="k">export</span> <span class="n">PATH</span><span class="o">=&lt;</span><span class="n">install</span> <span class="n">root</span><span class="o">&gt;/</span><span class="n">bin</span><span class="p">:</span><span class="o">$</span><span class="n">PATH</span>
</code></pre></div>

<p>Now continue with <a href="../Import/">importing the database</a>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Import/" class="btn btn-neutral float-right" title="Import">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../api/Faq/" class="btn btn-neutral" title="FAQ"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/openstreetmap/Nominatim/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../../api/Faq/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Import/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
